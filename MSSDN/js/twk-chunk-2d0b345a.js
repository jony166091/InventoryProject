(window.tawkJsonp=window.tawkJsonp||[]).push([["chunk-2d0b345a"],{2853:function(e,t,r){"use strict";r.r(t);var a=r("2f62"),s=r("f0b0"),i=r("7f46");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"form-card",mixins:[{methods:{setError:function(e,t){t.isError=e},setValue:function(e,t){t.value=e},formatFields:function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],i={},n="";if(a.required&&(i.required=this.$i18n("form","RequiredErrorMessage")),a.context&&"email"===a.context&&(i.email=this.$i18n("form","EmailErrorMessage"),n=this.email),a.context&&"name"===a.context&&(n=this.name),a.context&&"phone"===a.context&&(i.phone=this.$i18n("form","PhoneErrorMessage")),"department"===a.context&&Object.keys(this.departments).length){for(var o=[],l=0;l<Object.keys(this.departments).length;l++){var u=this.departments[l];o.push({text:"".concat(u.n," (").concat(this.$i18n("status",u.st),")"),rawText:u.n,value:u.did})}t.push({label:a.label,type:a.context,isRequired:a.required,selections:o||[],id:s.Helper.generateUUID(),errorMessage:i,isError:!1})}else t.push({label:a.label,type:a.context||a.type,isRequired:a.required,selections:a.options?this.formatOptions(a.options,a.type):null,value:"checkbox"===a.type?[]:n,id:s.Helper.generateUUID(),errorMessage:i})}return t},formatOptions:function(e,t){var r,a=[];"radio"===t&&(r=s.Helper.generateUUID());for(var i=0;i<e.length;i++){var n={value:e[i],label:e[i],id:s.Helper.generateUUID(),name:r};a.push(n)}return a},formatFormData:function(){var e={},t=!1;e.questions=[];for(var r=0;r<this.formFields.length;r++){var a=this.formFields[r],s=a.value||"";if("string"==typeof s&&(s=s.trim()),"name"===a.type)e.name=s;else if("email"===a.type)e.email=s;else if("department"===a.type){if(a.isRequired&&!this.selectedDepartment){if(!a.selections||!a.selections.length)continue;a.isError=!0,t=!0;continue}if(a.isError=!1,!this.selectedDepartment)continue;e.department=this.selectedDepartment.value,e.questions.push({label:i.a.rawDecode(a.label),answer:i.a.rawDecode(this.selectedDepartment.rawText)})}a.isRequired&&0===s.length&&"department"!==a.type&&(this.$refs[a.id]&&this.$refs[a.id].length&&this.$refs[a.id][0]&&this.$refs[a.id][0].validate&&this.$refs[a.id][0].validate(),t=!0),a.isError?t=!0:s&&s.length&&("string"==typeof s?e.questions.push({label:i.a.rawDecode(a.label),answer:s}):e.questions.push({label:i.a.rawDecode(a.label),answer:s.join(", ")}))}return{formData:e,hasError:t}}}}],components:{TawkCard:s.TawkCard,TawkInput:s.TawkInput,TawkTextarea:s.TawkTextarea,TawkRadio:s.TawkRadio,TawkCheckbox:s.TawkCheckbox,TawkButton:s.TawkButton,TawkIcon:s.TawkIcon,TawkDropdown:s.TawkDropdown,TawkList:s.TawkList,TawkListItem:s.TawkListItem},data:function(){return{headerClass:"",selectedDepartment:null,isDropdownOpen:!1,values:[],formFields:[]}},props:{state:{type:String,default:""},submissionError:{type:Boolean,default:!1},status:{type:Boolean,default:!1},isSubmitting:{type:Boolean,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.c)({states:"widget/states",departments:"session/departments",name:"visitor/name",email:"visitor/getEmailValue"})),mounted:function(){var e=this,t=[];if(this.state&&this.states[this.state])for(var r=this.states[this.state].body,a=0;a<r.length;a++){var s=r[a];"form"===s.type&&s.content&&s.content.fields&&(t=s.content.fields)}this.formFields=this.formatFields(t),this.formFields.forEach((function(t){e.$set(e.values,t.id,t.value)}))},methods:{submitForm:function(){var e=this.formatFormData();this.$emit("onFormSubmit",e)},dropdownSelect:function(e){this.isDropdownOpen=!1,this.selectedDepartment=e}},directives:{TawkScroll:s.TawkScroll}},u=r("2877"),c=Object(u.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{width:"100%"},attrs:{id:"tawk-form-container"}},[r("tawk-card",{staticClass:"tawk-form-input tawk-box-shadow-xsmall tawk-card-small tawk-custom-border-left",attrs:{color:"inverse"}},[r("form",{ref:"tawk-prechat-form",attrs:{id:"tawk-prechat-form",name:"tawk-prechat-form"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},e._l(e.formFields,(function(t,a){return r("div",{key:a},[r("fieldset",["text"===t.type?r("tawk-input",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small",attrs:{label:t.label,placeholder:t.label,isRequired:t.isRequired,errorMessage:t.errorMessage,value:e.values[t.id]},on:{"update:errorMessage":function(r){return e.$set(t,"errorMessage",r)},"update:error-message":function(r){return e.$set(t,"errorMessage",r)},"update:error":function(r){return e.setError(r,t)},input:function(r){return e.setValue(r,t)}},model:{value:e.values[t.id],callback:function(r){e.$set(e.values,t.id,r)},expression:"values[field.id]"}}):e._e(),"name"===t.type||"email"===t.type||"phone"===t.type?r("tawk-input",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small",attrs:{validation:t.type,label:t.label,placeholder:t.label,isRequired:t.isRequired,errorMessage:t.errorMessage,value:e.values[t.id]},on:{"update:errorMessage":function(r){return e.$set(t,"errorMessage",r)},"update:error-message":function(r){return e.$set(t,"errorMessage",r)},"update:error":function(r){return e.setError(r,t)},input:function(r){return e.setValue(r,t)}},model:{value:e.values[t.id],callback:function(r){e.$set(e.values,t.id,r)},expression:"values[field.id]"}}):e._e(),"textarea"===t.type?r("tawk-textarea",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small",attrs:{label:t.label,placeholder:t.label,isRequired:t.isRequired,errorMessage:t.errorMessage,value:e.values[t.id]},on:{"update:errorMessage":function(r){return e.$set(t,"errorMessage",r)},"update:error-message":function(r){return e.$set(t,"errorMessage",r)},"update:error":function(r){return e.setError(r,t)},input:function(r){return e.setValue(r,t)}},model:{value:e.values[t.id],callback:function(r){e.$set(e.values,t.id,r)},expression:"values[field.id]"}}):e._e(),"radio"===t.type?r("tawk-radio",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small",attrs:{label:t.label,options:t.selections,isRequired:t.isRequired,errorMessage:t.errorMessage},on:{input:function(r){return e.setValue(r,t)}}}):e._e(),"checkbox"===t.type?r("tawk-checkbox",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small",attrs:{label:t.label,value:t.value,options:t.selections,isRequired:t.isRequired,errorMessage:t.errorMessage}}):e._e(),"department"===t.type&&t.selections&&t.selections.length?r("tawk-dropdown",{ref:t.id,refInFor:!0,staticClass:"tawk-margin-small tawk-dropdown-container tawk-form-wrapper",attrs:{isOpen:e.isDropdownOpen},on:{"update:isOpen":function(t){e.isDropdownOpen=t},"update:is-open":function(t){e.isDropdownOpen=t}}},[r("tawk-button",{staticClass:"tawk-text-regular-2 tawk-flex tawk-flex-middle",class:t.isError?"tawk-form-danger":"",attrs:{isOutline:!0},on:{click:function(t){e.isDropdownOpen=!e.isDropdownOpen}}},[e.selectedDepartment?r("span",{staticClass:"tawk-flex-1 tawk-text-regular-2 tawk-text-truncate",domProps:{innerHTML:e._s(e.selectedDepartment.text)}}):e._e(),r("label",{staticClass:"tawk-form-label tawk-flex-1",class:[e.selectedDepartment?"tawk-active":""],attrs:{for:t.id}},[t.isRequired?[e._v("* ")]:e._e(),e._v(e._s(t.label)+" ")],2),r("tawk-icon",{staticClass:"tawk-flex-none tawk-margin-auto-left tawk-text-grey-2",attrs:{type:"down-arrow-3",size:"small"}})],1),t.isError?r("small",{staticClass:"tawk-text-red-1 tawk-text-regular-1"},[e._v(" "+e._s(e.$i18n("form","RequiredErrorMessage"))+" ")]):e._e(),r("div",{directives:[{name:"tawk-scroll",rawName:"v-tawk-scroll"}],staticClass:"tawk-dropdown-container",attrs:{slot:"menu"},slot:"menu"},[r("tawk-list",{attrs:{role:"list"}},e._l(t.selections,(function(t){return r("tawk-list-item",{key:t.value,attrs:{role:"listitem"}},[r("tawk-button",{staticClass:"tawk-text-regular-2",attrs:{isText:!0,"arial-label":t.text},domProps:{innerHTML:e._s(t.text)},on:{click:function(r){return e.dropdownSelect(t)}}})],1)})),1)],1)],1):e._e()],1)])})),0),r("div",{staticClass:"tawk-form-footer"},[r("tawk-button",{staticClass:"tawk-margin-small-top tawk-button-hover width-100 tawk-custom-color tawk-custom-border-color",class:[e.isSubmitting&&"tawk-button-submitting"],nativeOn:{click:function(t){return e.submitForm(t)}}},[e.isSubmitting?r("div",{staticClass:"tawk-flex tawk-flex-center"},[r("div",{staticClass:"tawk-spinner-loader"}),e._v(" "+e._s(e.$i18n("form","SubmittingProcess"))+" ")]):["prechat"===e.state?r("p",[r("tawk-icon",{attrs:{type:"mobile-send"}}),e._v(" "+e._s(e.$i18n("form","StartChatButton"))+" ")],1):r("p",[r("tawk-icon",{attrs:{type:"mobile-send"}}),e._v(" "+e._s(e.$i18n("form","SubmitButton"))+" ")],1)]],2)],1)])],1)])}),[],!1,null,null,null);t.default=c.exports}}]);